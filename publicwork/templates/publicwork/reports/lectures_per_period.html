{% extends "base/base.html" %}

{% block content %}

{% include "publicwork/elements/modal_search_lectures.html" %}

<article class="media content-section mb-1">
  <div class="media-body">
    <h2>
      Lectures per period &nbsp;&nbsp;
      <small class="text-muted"><em>from: {{ dt1 | date:"d/m/y" }} to: {{ dt2 | date:"d/m/y" }}</em></small>
    </h2>
  </div>
</article>

<div class="text-right mb-2">
  <div class="btn-group btn-group-sm mt-1" role="group">
    <a type="button" 
      class="btn btn-light text-success" 
      data-toggle="modal" data-target="#modal">
      <i class="fas fa-chart-bar"></i> 
      New search
    </a>
    <a type="button" 
      class="btn btn-light text-warning" 
      href="#">
      <i class="fas fa-print"></i> 
      To print
    </a>
    <a type="button" 
      class="btn btn-light text-primary" 
      href="#">
      <i class="fas fa-file-csv"></i> 
      To csv
    </a>
    <a type="button" 
      class="btn btn-light text-info" 
      href="{% url 'publicwork_home' %}">
      <i class="fas fa-chevron-left "></i> 
      Go back
    </a>
  </div>
</div>

{% if object_list %}

<article class="content-section mb-1">

  {% if object_list.has_other_pages %}
  {% include "base/elements/paginator.html" %}
  {% endif %}

  <table class="table table-sm table-hover">
    <thead>
      <tr>
        <th scope="col">date</th>
        <th scope="col">theme</th>
        <th scope="col">center</th>
        <th scope="col">type</th>
        <th scope="col" class="text-right"><i class="fas fa-calendar-check"></i></th>
      </tr>
    </thead>
    <tbody>
      {% for object in object_list %}
      <tr onclick="location.href='{% url 'lecture_detail' object.lect_pk %}';">
        <th scope="row" width="10%">{{ object.lect_date | date:"d/m/y" }}</th>
        <td>
          {{ object.lect_theme }}
        </td>
        <td>
          <small class="text-mute"> {{ object.lect_center }}</small>
        </td>
        <td>
          <span class="text-info text-right">
            {{ object.lect_type }}
          </span>
        </td>
        <td class="text-right">
          {% if object.lect_listeners %} 
          <span class="text-success">
            <strong>
              {{ object.lect_listeners }}
            </strong>
          </span>
          {% endif %} 
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% if object_list.has_other_pages %}
  {% include "base/elements/paginator.html" %}
  {% endif %}

</article>

{% else %}
<div class="alert alert-info" role="alert">
  <h4 class="alert-heading">define the reporting period</h4>
</div>
{% endif %}

{% block scripts %}
<script>
  $(document).ready(function(){
    var objectList = '{{ object_list }}';
    if (!objectList) {
      $('#modal').modal('show');
    }
  });
</script>
{% endblock %}

{% endblock %}